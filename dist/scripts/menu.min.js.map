{"version":3,"sources":["../../assets/scripts/menu.ts"],"names":["Jentil","Menu","_j","_l10n","this","_duration","_subMenuButtonClassName","_subMenuButtonSelector","prototype","run","addIconToParentMenuItems","hideSubMenus","showSidebarCurrentMenuItem","handleMenuButtonClick","handleMenuLinkClick","handleSubMenuButtonClick","before","renderCaret","next","hide","show","siblings","html","_this","attr","on","event","slideToggle","toggleClass","css","display","preventDefault","prev","currentTarget","toggleSubMenu","button","fx","target","parent","children","slideUp","toggleCaret","direction","submenu","jQuery","jentilMenuL10n"],"mappings":"AAKA,IAAUA,QAAV,SAAUA,GAEN,IAAAC,EAAA,WAQI,SAAAA,EACqBC,EACAC,GADAC,KAAAF,GAAAA,EACAE,KAAAD,MAAAA,EARJC,KAAAC,UAAoB,IACpBD,KAAAE,wBAAkC,qBAElCF,KAAAG,uBACb,IAAIH,KAAKE,wBAiHjB,OAzGWL,EAAAO,UAAAC,IAAP,WAEIL,KAAKM,2BACLN,KAAKO,eACLP,KAAKQ,6BAELR,KAAKS,wBACLT,KAAKU,sBACLV,KAAKW,4BAGDd,EAAAO,UAAAE,yBAAR,WAEIN,KAAKF,GAAG,iBAAiBc,OACrB,kBAAkBZ,KAAKE,wBAAuB,2CACxCF,KAAKa,YAAY,QAAO,gCAK9BhB,EAAAO,UAAAG,aAAR,WAEIP,KAAKF,GAAGE,KAAKG,wBAAwBW,KAAK,MAAMC,QAG5ClB,EAAAO,UAAAI,2BAAR,WAEIR,KAAKF,GAAG,+CAA+CkB,OAClDC,SAASjB,KAAKG,wBACde,KAAK,GAAGlB,KAAKa,YAAY,QAG1BhB,EAAAO,UAAAK,sBAAR,WAAA,IAAAU,EAAAnB,KAEIA,KAAKF,GAAG,wBAAwBsB,KAAK,OAAQ,KAAKC,GAC9C,QACA,SAACC,GACGH,EAAKrB,GAAG,iBAAiByB,YACrBJ,EAAKlB,UACL,WACIkB,EAAKrB,GAAG,iBAAiB0B,YAAY,aAChCC,IAAI,CAACC,QAAS,OAI3BJ,EAAMK,oBAKV9B,EAAAO,UAAAM,oBAAR,WAAA,IAAAS,EAAAnB,KAEIA,KAAKF,GAAGE,KAAKG,wBAAwByB,KAAK,KAAKP,GAC3C,QACA,SAACC,GACO,MAAQH,EAAKrB,GAAGwB,EAAMO,eAAeT,KAAK,UAC1CD,EAAKW,cAAcX,EAAKrB,GAAGwB,EAAMO,eAC5Bf,KAAK,WAEVQ,EAAMK,qBAMd9B,EAAAO,UAAAO,yBAAR,WAAA,IAAAQ,EAAAnB,KAEIA,KAAKF,GAAGE,KAAKG,wBAAwBkB,GACjC,QACA,SAACC,GACGH,EAAKW,cAAcR,EAAMO,eAEzBP,EAAMK,oBAKV9B,EAAAO,UAAA0B,cAAR,SAAsBC,EAAgBC,GAAtC,IAAAb,EAAAnB,UAAsC,IAAAgC,IAAAA,EAAA,SAAMC,GACxCd,EAAKrB,GAAGmC,GAAQV,YAAYJ,EAAKlB,aAEjCD,KAAKF,GAAGiC,GAAQG,SAASjB,SAAS,MAAMkB,SAAS,MAC5CC,QAAQpC,KAAKC,WAElBD,KAAKF,GAAGiC,GAAQG,SAASjB,SAAS,MAAMkB,SAAS,UAC5CjB,KAAKlB,KAAKa,YAAY,SAE3Bb,KAAKqC,YAAYN,GAEjBC,EAAGhC,KAAKF,GAAGiC,GAAQjB,KAAK,QAGpBjB,EAAAO,UAAAiC,YAAR,SAAoBN,GAEZ,SAAW/B,KAAKF,GAAGiC,GAAQjB,KAAK,MAAMW,IAAI,WAC1CzB,KAAKF,GAAGiC,GAAQb,KAAKlB,KAAKa,YAAY,OAEtCb,KAAKF,GAAGiC,GAAQb,KAAKlB,KAAKa,YAAY,UAItChB,EAAAO,UAAAS,YAAR,SAAoByB,GAEhB,MAAO,6BAA6BA,EAAS,oFACVtC,KAAKD,MAAMwC,QAAO,WAE7D1C,EAvHA,GAAaD,EAAAC,KAAIA,EAFrB,CAAUD,SAAAA,OAAM,KA4HhB,IAAIA,OAAOC,KAAK2C,OAAQC,gBAAgBpC","file":"menu.min.js","sourcesContent":["/// <reference path='./global.d.ts' />\n\ntype Target = JQuery<EventTarget>\ntype JClickEvent = JQuery.ClickEvent\n\nnamespace Jentil\n{\n    export class Menu\n    {\n        private readonly _duration: number = 200\n        private readonly _subMenuButtonClassName: string = 'js-sub-menu-button'\n\n        private readonly _subMenuButtonSelector: string =\n            `.${this._subMenuButtonClassName}`\n\n        public constructor(\n            private readonly _j: JQueryStatic,\n            private readonly _l10n: JentilMenuL10n\n        ) {\n        }\n\n        public run(): void\n        {\n            this.addIconToParentMenuItems()\n            this.hideSubMenus()\n            this.showSidebarCurrentMenuItem()\n\n            this.handleMenuButtonClick()\n            this.handleMenuLinkClick()\n            this.handleSubMenuButtonClick()\n        }\n\n        private addIconToParentMenuItems(): void\n        {\n            this._j('.menu li > ul').before(\n                `<button class=\"${this._subMenuButtonClassName} sub-menu-toggle\">\n                    ${this.renderCaret('down')}\n                </button>`\n            )\n        }\n\n        private hideSubMenus(): void\n        {\n            this._j(this._subMenuButtonSelector).next('ul').hide()\n        }\n\n        private showSidebarCurrentMenuItem(): void\n        {\n            this._j('.site-sidebar li.current-menu-ancestor > ul').show()\n                .siblings(this._subMenuButtonSelector)\n                .html(`${this.renderCaret('up')}`)\n        }\n\n        private handleMenuButtonClick(): void\n        {\n            this._j('.js-main-menu-button').attr('href', '#').on(\n                'click',\n                (event: JClickEvent): void => {\n                    this._j('.js-main-menu').slideToggle(\n                        this._duration,\n                        (): void => {\n                            this._j('.js-main-menu').toggleClass('show hide')\n                                .css({display: ''})\n                        }\n                    )\n\n                    event.preventDefault()\n                }\n            )\n        }\n\n        private handleMenuLinkClick(): void\n        {\n            this._j(this._subMenuButtonSelector).prev('a').on(\n                'click',\n                (event: JClickEvent): void => {\n                    if ('#' === this._j(event.currentTarget).attr('href')) {\n                        this.toggleSubMenu(this._j(event.currentTarget)\n                            .next('button'))\n\n                        event.preventDefault()\n                    }\n                }\n            )\n        }\n\n        private handleSubMenuButtonClick(): void\n        {\n            this._j(this._subMenuButtonSelector).on(\n                'click',\n                (event: JClickEvent): void => {\n                    this.toggleSubMenu(event.currentTarget)\n\n                    event.preventDefault()\n                }\n            )\n        }\n\n        private toggleSubMenu(button: Target, fx = (target: Target): void => {\n            this._j(target).slideToggle(this._duration)\n        }): void {\n            this._j(button).parent().siblings('li').children('ul')\n                .slideUp(this._duration)\n\n            this._j(button).parent().siblings('li').children('button')\n                .html(this.renderCaret('down'))\n\n            this.toggleCaret(button)\n\n            fx(this._j(button).next('ul'))\n        }\n\n        private toggleCaret(button: Target): void\n        {\n            if ('none' === this._j(button).next('ul').css('display')) {\n                this._j(button).html(this.renderCaret('up'))\n            } else {\n                this._j(button).html(this.renderCaret('down'))\n            }\n        }\n\n        private renderCaret(direction: 'up' | 'down'): string\n        {\n            return `<span class=\"fas fa-caret-${direction} fa-sm\" aria-hidden=\"true\"></span>\n            <span class=\"screen-reader-text\">${this._l10n.submenu}</span>`\n        }\n    }\n}\n\nnew Jentil.Menu(jQuery, jentilMenuL10n).run()\n"]}